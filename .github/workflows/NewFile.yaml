name: My Slark Text Workflow
#test

#trigger
on:
   push:
     branches:
        - 'release/v[0-9]+.[0-9]*'

jobs:
    #name of your job
    my-first-job:
        #runner
        runs-on: ubuntu-latest    

        #steps in this job
        steps:
          - name: checkout source code
            uses: actions/checkout@v4

          - name: Run Trivy vulnerability scanner in fs mode
            uses: aquasecurity/trivy-action@master
            with:
                scan-type: 'fs'
                scan-ref: '.'
                severity: 'HIGH'
         


          - name: Slack Notification
            uses: rtCamp/action-slack-notify@v2
            env:
                SLACK_WEBHOOK: ${{ secrets.P_SLACK_API }}
            with:
                payload: |
                    {
                      "blocks": [
                        {
                          "type": "section",
                          "text": {
                            "type": "mrkdwn",
                            "text": "*Actions URL:* Bulid and Push"
                          }
                        },
                        {
                          "type": "section",
                          "text": {
                            "type": "mrkdwn",
                            "text": "Name: person name\nMetriculation: person number\nEmail: person email\nGit:${{github.server_url}}/${{github.repository}}\nImage: Image URL"
                          }
                        }
                      ]
                    }
  
